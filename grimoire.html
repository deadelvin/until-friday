<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>The Grimoire â€” Until-Friday</title>

<link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,400&family=Special+Elite&display=swap" rel="stylesheet">

<style>
:root{
  --bg: #0f0f0f;
  --card: #1e1e1e;
  --accent: #1be729;
  --muted: #d8c3a5;
  --glass: rgba(255,255,255,0.02);
  --maxwidth: 1100px;
  --card-radius: 12px;
  --card-shadow: 0 8px 30px rgba(11, 88, 24, 0.12);
}

html,body{height:100%;}
body{
  margin:0;
  min-height:100%;
  background: radial-gradient(circle at 8% 6%, #0a0a0a, var(--bg) 40%);
  color:var(--muted);
  font-family: "Merriweather", serif;
  -webkit-font-smoothing:antialiased;
  padding:2rem;
  display:flex;
  justify-content:center;
}

.page { width:100%; max-width:var(--maxwidth); }

header.grimoire-header{
  text-align:center;
  margin-bottom:1.25rem;
}
header h1{
  font-family:'Special Elite',cursive;
  color:var(--accent);
  font-size:2.2rem;
  margin:0;
  letter-spacing:1px;
  text-shadow: 0 0 6px rgba(27,231,41,0.12);
}
header p{ margin:0.5rem 0 1rem; color:#bfeebb; opacity:0.9; }

/* NAVIGATION */
nav {
  display: flex;
  justify-content: center;
  background-color: #06a311;
  padding: 1rem 0;
  position: sticky;
  top: 0;
  z-index: 10;
}
nav a {
  color: #000000;
  padding: 1rem;
  text-decoration: none;
  transition: color 0.3s ease, border-bottom 0.3s ease;
  font-weight: bold;
}
nav a:hover {
  color: #1be729;
  border-bottom: 2px solid #f7d7c2;
}

/* SEARCH + FILTER BAR */
.controls{
  display:flex;
  gap:0.75rem;
  justify-content:center;
  align-items:center;
  margin-bottom:1.25rem;
  flex-wrap:wrap;
}

.search {
  display:flex;
  align-items:center;
  gap:.5rem;
  background:var(--glass);
  border:1px solid rgba(27,231,41,0.08);
  padding:.35rem .6rem;
  border-radius:999px;
  min-width:240px;
  box-shadow: inset 0 -1px 0 rgba(255,255,255,0.02);
}
.search input{
  background:transparent;
  border:0;
  outline:0;
  color:var(--muted);
  font-size:0.95rem;
  width:220px;
}
.search input::placeholder{color:#9fbf9f}

.filters{
  display:flex;
  gap:.5rem;
  align-items:center;
}
.filters select, .filters button {
  background:transparent;
  color:var(--muted);
  border:1px solid rgba(27,231,41,0.08);
  padding:.45rem .65rem;
  border-radius:8px;
  font-size:0.95rem;
  cursor:pointer;
}
.filters select:focus, .search input:focus, .filters button:focus{
  outline:2px solid rgba(27,231,41,0.08);
  box-shadow:0 0 8px rgba(27,231,41,0.06);
}

/* GRID */
.grid {
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(240px, 1fr));
  gap:1.25rem;
  align-items:start;
}

/* CARD (flip) */
.card {
  perspective: 1200px;
  height: 360px;
  width: 100%;
  max-width: 280px; /* tarot-card-ish size */
}

.card-inner{
  position:relative;
  width:100%;
  height:100%;
  transform-style:preserve-3d;
  transition: transform 550ms cubic-bezier(.2,.9,.3,1);
  border-radius: var(--card-radius);
  cursor:pointer;
  box-shadow: var(--card-shadow);
}

/* FLIP */
.card-inner.is-flipped {
  transform: rotateY(180deg);
}

.card-face{
  position:absolute;
  inset:0;
  backface-visibility:hidden;
  border-radius: var(--card-radius);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
  align-items:stretch;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
  border: 1px solid rgba(27,231,41,0.06);
}

.card-front{ padding:1rem; }
.card-back{
  padding:1rem;
  transform: rotateY(180deg);
  background: linear-gradient(180deg, rgba(0,0,0,0.04), rgba(255,255,255,0.01));
}

/* Title / Sigil */
.card-title { font-size:1.05rem; color:var(--accent); margin:0 0 .4rem 0; font-family:'Special Elite',cursive; }

.sigil {
  width:64px;
  height:64px;
  border-radius:8px;
  display:inline-block;
  background:linear-gradient(135deg, rgba(27,231,41,0.06), rgba(27,231,41,0.02));
  border:2px solid rgba(27,231,41,0.18);
  color:var(--accent);
  font-size:1.8rem;
  line-height:64px;
  text-align:center;
  margin-right:.6rem;
  flex:0 0 64px;
  box-shadow: 0 6px 18px rgba(11,88,24,0.06);
}

.card-head{
  display:flex;
  align-items:center;
  gap:.6rem;
  margin-bottom:.6rem;
}

.card-excerpt{
  color:var(--muted);
  font-size:0.97rem;
  line-height:1.45;
  flex:1;
  overflow:hidden;
  display:-webkit-box;
  -webkit-line-clamp:6;
  -webkit-box-orient:vertical;
  text-overflow:ellipsis;
}

/* back content */
.card-back .influences{
  font-size:0.92rem;
  color:#e7dccd;
  line-height:1.4;
  overflow:auto;
  max-height: calc(100% - 60px);
  padding-right:6px;
}

.influences a{ color:var(--accent); text-decoration:underline; text-underline-offset:3px; }

.small-btn{
  background:transparent;
  border:1px solid rgba(27,231,41,0.08);
  color:var(--muted);
  padding:.35rem .6rem;
  border-radius:8px;
  cursor:pointer;
  font-size:.9rem;
}

.small-btn:focus{ outline:2px solid rgba(27,231,41,0.08); }

.modal{
  position:fixed;
  inset:0;
  display:none;
  background:rgba(0,0,0,0.6);
  align-items:center;
  justify-content:center;
  z-index:1200;
  padding:1rem;
}

.modal.open{ display:flex; }

.modal-dialog{
  max-width:820px;
  width:100%;
  max-height:90vh;
  overflow:auto;
  background:var(--card);
  border-radius:12px;
  padding:1.2rem;
  border:2px solid rgba(27,231,41,0.08);
}

.modal h3{ color:var(--accent); margin-top:0; font-family:'Special Elite',cursive; }

@media (max-width:600px){
  .card{ height:420px; }
  .sigil{ width:56px; height:56px; line-height:56px; font-size:1.5rem;}
}
</style>
</head>
<body>

<div class="page" id="grimoire">
  <header class="grimoire-header">
    <h1>âœ¦ the grimoire âœ¦</h1>
    <p>Where I gather my spells.</p>
  </header>

  <nav>
    <a href="index.html">Home</a>
    <a href="classes.html">Classes</a>
    <a href="grimoire.html">Grimoire</a>
    <a href="contact.html">Contact</a>
  </nav>

  <div class="controls">
    <div class="search">
      <input id="searchInput" type="search" placeholder="Search spells..." />
    </div>
    <div class="filters">
      <select id="elementFilter">
        <option value="">All elements</option>
        <option value="Banishing">Banishing</option>
        <option value="Binding">Binding</option>
        <option value="Divination">Divination</option>
        <option value="Dream">Dream</option>
        <option value="Healing">Healing</option>
        <option value="Herbal">Herbal</option>
        <option value="Luck">Luck</option>
        <option value="Love">Love</option>
        <option value="Manifesting">Manifesting</option>
        <option value="Protection">Protection</option>
      </select>
      <button id="clearBtn" class="small-btn">Clear</button>
    </div>
  </div>

  <main>
    <section class="grid" id="cardGrid">
      <article class="card" tabindex="0" data-tags="Manifesting">
        <div class="card-inner">
          <div class="card-face card-front">
            <div class="card-head">
              <div class="sigil">ð–¦¹</div>
              <div>
                <h3 class="card-title">Goal Manifestation</h3>
                <div class="card-excerpt">A spell to facilitate manifesting your goals.</div>
              </div>
            </div>
            <button class="small-btn flip-btn">Flip</button>
          </div>
          <div class="card-face card-back">
            <h4>Link to spell</h4>
            <div class="influences"> <a href="WITCH102HW2.html">See spell and notes on influences here</a> </div>
          </div>
        </div>
      </article>
      <article class="card" tabindex="0" data-tags="Protection">
  <div class="card-inner">
    <div class="card-face card-front">
      <div class="card-head">
        <div class="sigil">ðŸœƒ</div>
        <div>
          <h3 class="card-title">Placeholder For Future Spell :P</h3>
          <div class="card-excerpt">Placeholder description of spell.</div>
        </div>
      </div>
      <button class="small-btn flip-btn">Flip</button>
    </div>
    <div class="card-face card-back">
      <h4>Link to spell</h4>
      <div class="influences">Placeholder to spell link.</div>
    </div>
  </div>
</article>

    </section>
  </main>

  <div id="modal" class="modal">
    <div class="modal-dialog">
      <button id="closeModal" class="small-btn" style="float:right">Close</button>
      <h3 id="modalTitle"></h3>
      <div id="modalBody"></div>
    </div>
  </div>
</div>

<script>
const grid=document.getElementById('cardGrid');
const modal=document.getElementById('modal');
const closeModal=document.getElementById('closeModal');

// flip behavior
grid.querySelectorAll('.card').forEach(card=>{
  const inner=card.querySelector('.card-inner');
  const flipBtn=card.querySelector('.flip-btn');

  flipBtn.addEventListener('click', e=>{ e.stopPropagation(); inner.classList.toggle('is-flipped'); });

  card.addEventListener('click', e=>{
    if(e.target.closest('button')||e.target.closest('a')) return;
    inner.classList.toggle('is-flipped');
  });

  card.addEventListener('keydown', e=>{
    if(e.key==='Enter'||e.key===' '){ e.preventDefault(); inner.classList.toggle('is-flipped'); }
  });
});

// modal
closeModal.addEventListener('click', ()=>{ modal.classList.remove('open'); });
modal.addEventListener('click', e=>{ if(e.target===modal) modal.classList.remove('open'); });
document.addEventListener('keydown', e=>{ if(e.key==='Escape') modal.classList.remove('open'); });

// ===== SEARCH + FILTER LOGIC =====
const searchInput=document.getElementById('searchInput');
const elementFilter=document.getElementById('elementFilter');
const clearBtn=document.getElementById('clearBtn');

function cardData(card){
  const title=card.querySelector('.card-title')?.textContent||'';
  const text=card.querySelector('.card-excerpt')?.textContent||'';
  const tags=card.dataset.tags ? card.dataset.tags.split(' ') : [];
  return {title,text,tags};
}

function applyFilters(){
  const q=searchInput.value.trim().toLowerCase();
  const element=elementFilter.value;
  grid.querySelectorAll('.card').forEach(card=>{
    const data=cardData(card);
    const matchesSearch=!q || (data.title+' '+data.text).toLowerCase().includes(q);
    const matchesFilter=!element || data.tags.map(t=>t.toLowerCase()).includes(element.toLowerCase());
    card.style.display=(matchesSearch && matchesFilter)?'':'none';
  });
}

searchInput.addEventListener('input', applyFilters);
elementFilter.addEventListener('change', applyFilters);
clearBtn.addEventListener('click', ()=>{
  searchInput.value='';
  elementFilter.value='';
  applyFilters();
});
</script>

</body>
</html>
